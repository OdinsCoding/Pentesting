#!/bin/bash

url=$1

if [ ! -d "$url" ];then
	echo "[+] Building directory $url..."
	mkdir $url
else
	echo "[-] The directory $url already exist. Proceeding..."
fi

if [ ! -d "$url/recon" ];then
	echo "[+] Building directory recon..."
	mkdir $url/recon
else
	echo "[-] The directory recon already exist. Proceeding..."
fi

echo "[+] Harvesting subdomains with assetfinder... "
assetfinder $url > $url/recon/assets.txt
echo "[+] Filtering for subdomains of $url only..."
cat $url/recon/assets.txt | grep $1 |sort -u > $url/recon/subs_only_final.txt
rm $url/recon/assets.txt
echo "[Success] All subdomains of $url have been collected in the $url/recon directory!"